#!/usr/bin/env bash

[[ $# -ne 1 ]] && { echo "Usage: $0 <project_name>"; exit 1; }

PROJECT="$1"

mkdir "$PROJECT" && cd "$PROJECT"

#create basic CMakeLists.txt
cat > CMakeLists.txt << EOF
cmake_minimum_required(VERSION 3.16)
project($PROJECT)

set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

add_executable($PROJECT src/main.cpp)
EOF

#create src dir and main file
mkdir src
cat > src/main.cpp << 'EOF'
#include <iostream>

int main() {
    std::cout << "Hello, World!" << std::endl;
    return 0;
}
EOF

#generate build files and build
cmake -B build -S .
cmake --build build

nvim src/main.cpp
EOF
